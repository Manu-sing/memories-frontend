{"ast":null,"code":"import _defineProperty from\"/Users/emanueleguarnaccia/memories-frontend/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/emanueleguarnaccia/memories-frontend/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/emanueleguarnaccia/memories-frontend/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import useStyles from\"./styles\";import{useState}from\"react\";import{Avatar,Button,Paper,Grid,Typography,Container}from\"@mui/material\";import LockOutlinedIcon from\"@mui/icons-material/LockOutlined\";import Input from\"./Input\";import{signInWithGoogle}from\"./firebase-config\";import{useDispatch}from\"react-redux\";import{setAuth,signup,signin}from\"../../reducers/auth\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={firstName:\"\",lastName:\"\",email:\"\",password:\"\",confirmPassword:\"\"};var Auth=function Auth(_ref){var setMessage=_ref.setMessage,setTypeOfMessage=_ref.setTypeOfMessage;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showPassword=_useState2[0],setShowPassword=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSignup=_useState4[0],setIsSignup=_useState4[1];var _useState5=useState(initialState),_useState6=_slicedToArray(_useState5,2),formData=_useState6[0],setFormData=_useState6[1];var dispatch=useDispatch();var navigate=useNavigate();var classes=useStyles();var handleSubmit=function handleSubmit(e){e.preventDefault();console.log(formData);if(isSignup){// implement the logic to sign up the user\ndispatch(signup(setMessage,setTypeOfMessage,formData,navigate));}else{dispatch(signin(setMessage,setTypeOfMessage,formData,navigate));}};var handleChange=function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var handleShowPassword=function handleShowPassword(){setShowPassword(!showPassword);// if it doesn't work use this setShowPassword((prevShowPassword) => !prevShowPassword)\n};var switchMode=function switchMode(){setIsSignup(!isSignup);setShowPassword(false);console.log(isSignup);};var loginWithGoogle=function loginWithGoogle(){signInWithGoogle().then(function(res){var name=res===null||res===void 0?void 0:res.user.displayName;var email=res===null||res===void 0?void 0:res.user.email;var url=res===null||res===void 0?void 0:res.user.photoURL;var token=res===null||res===void 0?void 0:res._tokenResponse.idToken;dispatch(setAuth({name:name,email:email,url:url,token:token}));setTypeOfMessage(\"success\");setMessage(\"Welcome \".concat(res.user.displayName,\".\"));setTimeout(function(){setMessage(null);setTypeOfMessage(null);},8000);navigate(\"/\");}).catch(function(error){setTypeOfMessage(\"error\");setMessage(\"Login with Google was unsuccesfull. Try again later.\");setTimeout(function(){setMessage(null);setTypeOfMessage(null);},6000);console.log(error);});};return/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"xs\",children:/*#__PURE__*/_jsxs(Paper,{className:classes.paper,elevation:3,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,children:/*#__PURE__*/_jsx(LockOutlinedIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:isSignup?\"Sign Up\":\"Sign In\"}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[isSignup&&/*#__PURE__*/ // usable if you only want to show something in case your statement is true\n_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Input,{name:\"firstName\",label:\"First Name\",handleChange:handleChange,autoFocus:true,half:true}),/*#__PURE__*/_jsx(Input,{name:\"lastName\",label:\"Last Name\",handleChange:handleChange,half:true})]}),/*#__PURE__*/_jsx(Input,{name:\"email\",label:\"Email Address\",handleChange:handleChange,type:\"email\"}),/*#__PURE__*/_jsx(Input,{name:\"password\",label:\"Password\",handleChange:handleChange,type:showPassword?\"text\":\"password\",handleShowPassword:handleShowPassword}),isSignup&&/*#__PURE__*/_jsx(Input,{name:\"confirmPassword\",label:\"Repeat Password\",handleChange:handleChange,type:\"password\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit,children:isSignup?\"Sign Up\":\"Sign In\"}),/*#__PURE__*/_jsx(Button,{className:classes.googleButton,color:\"primary\",variant:\"contained\",fullWidth:true,onClick:loginWithGoogle,children:\"Google Sign In\"}),/*#__PURE__*/_jsx(Grid,{container:true,justifyContent:\"flex-end\",children:/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{onClick:switchMode,children:isSignup?\"Already have an account? Sign In.\":\"Don't have an account? Sign Up.\"})})})]})]})});};export default Auth;","map":{"version":3,"names":["React","useStyles","useState","Avatar","Button","Paper","Grid","Typography","Container","LockOutlinedIcon","Input","signInWithGoogle","useDispatch","setAuth","signup","signin","useNavigate","initialState","firstName","lastName","email","password","confirmPassword","Auth","setMessage","setTypeOfMessage","showPassword","setShowPassword","isSignup","setIsSignup","formData","setFormData","dispatch","navigate","classes","handleSubmit","e","preventDefault","console","log","handleChange","target","name","value","handleShowPassword","switchMode","loginWithGoogle","then","res","user","displayName","url","photoURL","token","_tokenResponse","idToken","setTimeout","catch","error","paper","avatar","form","submit","googleButton"],"sources":["/Users/emanueleguarnaccia/memories-frontend/client/src/components/Auth/Auth.js"],"sourcesContent":["import React from \"react\";\nimport useStyles from \"./styles\";\nimport { useState } from \"react\";\nimport {\n  Avatar,\n  Button,\n  Paper,\n  Grid,\n  Typography,\n  Container,\n} from \"@mui/material\";\nimport LockOutlinedIcon from \"@mui/icons-material/LockOutlined\";\nimport Input from \"./Input\";\nimport { signInWithGoogle } from \"./firebase-config\";\nimport { useDispatch } from \"react-redux\";\nimport { setAuth, signup, signin } from \"../../reducers/auth\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst initialState = {\n  firstName: \"\",\n  lastName: \"\",\n  email: \"\",\n  password: \"\",\n  confirmPassword: \"\",\n};\n\nconst Auth = ({ setMessage, setTypeOfMessage }) => {\n  const [showPassword, setShowPassword] = useState(false);\n  const [isSignup, setIsSignup] = useState(false);\n  const [formData, setFormData] = useState(initialState);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const classes = useStyles();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log(formData);\n    if (isSignup) {\n      // implement the logic to sign up the user\n      dispatch(signup(setMessage, setTypeOfMessage, formData, navigate));\n    } else {\n      dispatch(signin(setMessage, setTypeOfMessage, formData, navigate));\n    }\n  };\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleShowPassword = () => {\n    setShowPassword(!showPassword);\n    // if it doesn't work use this setShowPassword((prevShowPassword) => !prevShowPassword)\n  };\n\n  const switchMode = () => {\n    setIsSignup(!isSignup);\n    setShowPassword(false);\n    console.log(isSignup);\n  };\n\n  const loginWithGoogle = () => {\n    signInWithGoogle()\n      .then((res) => {\n        const name = res?.user.displayName;\n        const email = res?.user.email;\n        const url = res?.user.photoURL;\n        const token = res?._tokenResponse.idToken;\n        dispatch(\n          setAuth({\n            name,\n            email,\n            url,\n            token,\n          })\n        );\n        setTypeOfMessage(\"success\");\n        setMessage(`Welcome ${res.user.displayName}.`);\n        setTimeout(() => {\n          setMessage(null);\n          setTypeOfMessage(null);\n        }, 8000);\n        navigate(\"/\");\n      })\n      .catch((error) => {\n        setTypeOfMessage(\"error\");\n        setMessage(\"Login with Google was unsuccesfull. Try again later.\");\n        setTimeout(() => {\n          setMessage(null);\n          setTypeOfMessage(null);\n        }, 6000);\n        console.log(error);\n      });\n  };\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <Paper className={classes.paper} elevation={3}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography variant=\"h5\">{isSignup ? \"Sign Up\" : \"Sign In\"}</Typography>\n        <form className={classes.form} onSubmit={handleSubmit}>\n          <Grid container spacing={2}>\n            {isSignup && ( // usable if you only want to show something in case your statement is true\n              <>\n                <Input\n                  name=\"firstName\"\n                  label=\"First Name\"\n                  handleChange={handleChange}\n                  autoFocus\n                  half\n                />\n                <Input\n                  name=\"lastName\"\n                  label=\"Last Name\"\n                  handleChange={handleChange}\n                  half\n                />\n              </>\n            )}\n            <Input\n              name=\"email\"\n              label=\"Email Address\"\n              handleChange={handleChange}\n              type=\"email\"\n            />\n            <Input\n              name=\"password\"\n              label=\"Password\"\n              handleChange={handleChange}\n              type={showPassword ? \"text\" : \"password\"}\n              handleShowPassword={handleShowPassword}\n            />\n            {isSignup && (\n              <Input\n                name=\"confirmPassword\"\n                label=\"Repeat Password\"\n                handleChange={handleChange}\n                type=\"password\"\n              />\n            )}\n          </Grid>\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n          >\n            {isSignup ? \"Sign Up\" : \"Sign In\"}\n          </Button>\n          <Button\n            className={classes.googleButton}\n            color=\"primary\"\n            variant=\"contained\"\n            fullWidth\n            onClick={loginWithGoogle}\n          >\n            Google Sign In\n          </Button>\n          <Grid container justifyContent=\"flex-end\">\n            <Grid item>\n              <Button onClick={switchMode}>\n                {isSignup\n                  ? \"Already have an account? Sign In.\"\n                  : \"Don't have an account? Sign Up.\"}\n              </Button>\n            </Grid>\n          </Grid>\n        </form>\n      </Paper>\n    </Container>\n  );\n};\n\nexport default Auth;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _objectSpread from\"/Users/emanueleguarnaccia/memories-frontend/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/emanueleguarnaccia/memories-frontend/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import useStyles from\"./styles\";import{TextField,Button,Typography,Paper,Box}from\"@mui/material\";import{createPost,updatePost}from\"../../reducers/postReducer\";import FileBase from\"react-file-base64\";import{useDispatch}from\"react-redux\";import{useSelector}from\"react-redux\";import{setId}from\"../../reducers/idReducer\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Form=function Form(){var user=useSelector(function(state){return state.auth.authData;});var dispatch=useDispatch();var _useState=useState({creator:\"\",title:\"\",message:\"\",tags:\"\",selectedFile:\"\"}),_useState2=_slicedToArray(_useState,2),postInfo=_useState2[0],setPostInfo=_useState2[1];var classes=useStyles();var currentId=useSelector(function(state){return state.currentId;});var post=useSelector(function(state){return currentId?state.posts.find(function(post){return post._id===currentId;}):null;});useEffect(function(){if(post){setPostInfo(post);}},[post]);var handleSubmit=function handleSubmit(e){e.preventDefault();if(currentId){dispatch(updatePost(currentId,postInfo));}else{dispatch(createPost(postInfo));}clear();};var clear=function clear(){dispatch(setId(null));setPostInfo({creator:\"\",title:\"\",message:\"\",tags:\"\",selectedFile:\"\"});};if(user===null){return null;}else{return/*#__PURE__*/_jsx(Paper,{className:classes.paper,children:/*#__PURE__*/_jsxs(\"form\",{autoComplete:\"off\",noValidate:true,className:\"{classes.root} {classes.form}\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",textAlign:\"center\",children:[currentId?\"Editing\":\"Creating\",\" a Memory\"]}),/*#__PURE__*/_jsx(TextField,{margin:\"dense\",name:\"creator\",variant:\"outlined\",label:\"Creator\",fullWidth:true,value:postInfo.creator,onChange:function onChange(e){return setPostInfo(_objectSpread(_objectSpread({},postInfo),{},{creator:e.target.value}));}}),/*#__PURE__*/_jsx(TextField,{margin:\"dense\",name:\"title\",variant:\"outlined\",label:\"Title\",fullWidth:true,value:postInfo.title,onChange:function onChange(e){return setPostInfo(_objectSpread(_objectSpread({},postInfo),{},{title:e.target.value}));}}),/*#__PURE__*/_jsx(TextField,{margin:\"dense\",name:\"message\",variant:\"outlined\",label:\"Message\",fullWidth:true,value:postInfo.message,onChange:function onChange(e){return setPostInfo(_objectSpread(_objectSpread({},postInfo),{},{message:e.target.value}));}}),/*#__PURE__*/_jsx(TextField,{margin:\"dense\",name:\"tags\",variant:\"outlined\",label:\"Tags\",fullWidth:true,value:postInfo.tags,onChange:function onChange(e){return setPostInfo(_objectSpread(_objectSpread({},postInfo),{},{tags:e.target.value.split(\",\")}));}}),/*#__PURE__*/_jsx(\"div\",{className:classes.fileInput,children:/*#__PURE__*/_jsx(FileBase,{type:\"file\",multiple:false,onDone:function onDone(_ref){var base64=_ref.base64;return setPostInfo(_objectSpread(_objectSpread({},postInfo),{},{selectedFile:base64}));}})}),/*#__PURE__*/_jsx(Box,{marginBottom:1,children:/*#__PURE__*/_jsx(Button,{className:classes.buttonSubmit,variant:\"contained\",color:\"primary\",size:\"large\",type:\"submit\",fullWidth:true,children:\"Submit\"})}),/*#__PURE__*/_jsx(Box,{marginBottom:1,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",size:\"small\",onClick:clear,fullWidth:true,children:\"Clear\"})})]})});}};export default Form;","map":{"version":3,"names":["React","useState","useEffect","useStyles","TextField","Button","Typography","Paper","Box","createPost","updatePost","FileBase","useDispatch","useSelector","setId","Form","user","state","auth","authData","dispatch","creator","title","message","tags","selectedFile","postInfo","setPostInfo","classes","currentId","post","posts","find","_id","handleSubmit","e","preventDefault","clear","paper","target","value","split","fileInput","base64","buttonSubmit"],"sources":["/Users/emanueleguarnaccia/memories-frontend/client/src/components/Form/Form.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport useStyles from \"./styles\";\nimport { TextField, Button, Typography, Paper, Box } from \"@mui/material\";\nimport { createPost, updatePost } from \"../../reducers/postReducer\";\nimport FileBase from \"react-file-base64\";\nimport { useDispatch } from \"react-redux\";\nimport { useSelector } from \"react-redux\";\nimport { setId } from \"../../reducers/idReducer\";\n\nconst Form = () => {\n  const user = useSelector((state) => state.auth.authData);\n  const dispatch = useDispatch();\n  const [postInfo, setPostInfo] = useState({\n    creator: \"\",\n    title: \"\",\n    message: \"\",\n    tags: \"\",\n    selectedFile: \"\",\n  });\n  const classes = useStyles();\n  const currentId = useSelector((state) => state.currentId);\n  const post = useSelector((state) =>\n    currentId ? state.posts.find((post) => post._id === currentId) : null\n  );\n\n  useEffect(() => {\n    if (post) {\n      setPostInfo(post);\n    }\n  }, [post]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (currentId) {\n      dispatch(updatePost(currentId, postInfo));\n    } else {\n      dispatch(createPost(postInfo));\n    }\n    clear();\n  };\n\n  const clear = () => {\n    dispatch(setId(null));\n    setPostInfo({\n      creator: \"\",\n      title: \"\",\n      message: \"\",\n      tags: \"\",\n      selectedFile: \"\",\n    });\n  };\n\n  if (user === null) {\n    return null;\n  } else {\n    return (\n      <Paper className={classes.paper}>\n        <form\n          autoComplete=\"off\"\n          noValidate\n          className={`{classes.root} {classes.form}`}\n          onSubmit={handleSubmit}\n        >\n          <Typography variant=\"h6\" textAlign=\"center\">\n            {currentId ? \"Editing\" : \"Creating\"} a Memory\n          </Typography>\n          <TextField\n            margin=\"dense\"\n            name=\"creator\"\n            variant=\"outlined\"\n            label=\"Creator\"\n            fullWidth\n            value={postInfo.creator}\n            onChange={(e) =>\n              setPostInfo({ ...postInfo, creator: e.target.value })\n            }\n          />\n          <TextField\n            margin=\"dense\"\n            name=\"title\"\n            variant=\"outlined\"\n            label=\"Title\"\n            fullWidth\n            value={postInfo.title}\n            onChange={(e) =>\n              setPostInfo({ ...postInfo, title: e.target.value })\n            }\n          />\n          <TextField\n            margin=\"dense\"\n            name=\"message\"\n            variant=\"outlined\"\n            label=\"Message\"\n            fullWidth\n            value={postInfo.message}\n            onChange={(e) =>\n              setPostInfo({ ...postInfo, message: e.target.value })\n            }\n          />\n          <TextField\n            margin=\"dense\"\n            name=\"tags\"\n            variant=\"outlined\"\n            label=\"Tags\"\n            fullWidth\n            value={postInfo.tags}\n            onChange={(e) =>\n              setPostInfo({\n                ...postInfo,\n                tags: e.target.value.split(\",\"),\n              })\n            }\n          />\n          <div className={classes.fileInput}>\n            <FileBase\n              type=\"file\"\n              multiple={false}\n              onDone={({ base64 }) =>\n                setPostInfo({ ...postInfo, selectedFile: base64 })\n              }\n            />\n          </div>\n          <Box marginBottom={1}>\n            <Button\n              className={classes.buttonSubmit}\n              variant=\"contained\"\n              color=\"primary\"\n              size=\"large\"\n              type=\"submit\"\n              fullWidth\n            >\n              Submit\n            </Button>\n          </Box>\n          <Box marginBottom={1}>\n            <Button\n              variant=\"contained\"\n              color=\"secondary\"\n              size=\"small\"\n              onClick={clear}\n              fullWidth\n            >\n              Clear\n            </Button>\n          </Box>\n        </form>\n      </Paper>\n    );\n  }\n};\n\nexport default Form;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}